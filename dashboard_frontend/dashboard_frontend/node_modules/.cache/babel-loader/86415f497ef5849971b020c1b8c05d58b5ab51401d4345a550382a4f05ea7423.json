{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\002335631\\\\Documents\\\\sar_documents\\\\archive\\\\archive_dashboard\\\\dashboard_frontend\\\\dashboard_frontend\\\\src\\\\pages\\\\List\\\\index.tsx\",\n  _s = $RefreshSig$();\nimport React, { useMemo, useState, useEffect } from 'react';\nimport { v4 as uuidv4 } from 'uuid';\nimport ContentHeader from '../../components/ContentHeader';\nimport { useParams } from 'react-router-dom';\nimport SelectInput from '../../components/SelectInput';\nimport JobMonitoring from '../../components/JobMonitoring';\nimport radar_run from '../../repositories/radar_run';\nimport myna_run from '../../repositories/myna_run';\nimport formatDate from '../../utils/formatDate';\nimport listOfMonths from '../../utils/months';\nimport { Container, Content, Filters } from './styles';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst List = () => {\n  _s();\n  const [data, setData] = useState([]);\n  const [monthSelected, setMonthSelected] = useState(String(new Date().getMonth() + 1));\n  const [yearSelected, setYearSelected] = useState(String(new Date().getFullYear()));\n  const [selectedStatus, setSelectedStatus] = useState([\"Success\", \"Fail\"]);\n  const {\n    job\n  } = useParams();\n  const title = useMemo(() => {\n    return job === 'entry-myna' ? 'Myna monitoring' : 'Radar monitoring';\n  }, [job]);\n  const lineColor = useMemo(() => {\n    return job === 'entry-myna' ? '#F7931B' : '#E44C4E';\n  }, [job]);\n  const listData = useMemo(() => {\n    return job === 'entry-myna' ? myna_run : radar_run;\n  }, [job]);\n  const years = useMemo(() => {\n    let uniqueYears = [];\n    listData.forEach(item => {\n      const date = new Date(item.date);\n      const year = date.getFullYear();\n      if (!uniqueYears.includes(year)) {\n        uniqueYears.push(year);\n      }\n    });\n    return uniqueYears.map(year => {\n      return {\n        value: year,\n        label: year\n      };\n    });\n  }, [listData]);\n  const months = useMemo(() => {\n    return listOfMonths.map((month, index) => {\n      return {\n        value: index + 1,\n        label: month\n      };\n    });\n  }, []);\n  const handleStatusClick = runStatus => {\n    const alreadySelected = selectedStatus.findIndex(item => item === runStatus);\n    if (alreadySelected >= 0) {\n      console.log('ja selecionado');\n      const filtered = selectedStatus.filter(item => item !== runStatus);\n      setSelectedStatus(filtered);\n    } else {\n      console.log('selecionado agora');\n      setSelectedStatus(prev => [...prev, runStatus]);\n    }\n  };\n  useEffect(() => {\n    const filteredDate = listData.filter(item => {\n      const date = new Date(item.date);\n      const month = String(date.getMonth() + 1);\n      const year = String(date.getFullYear());\n      return month === monthSelected && year === yearSelected;\n    });\n    const formattedData = filteredDate.map(item => {\n      return {\n        // id: String(new Date().getTime()) + (Math.random()),\n        id: uuidv4(),\n        status: item.status,\n        date: formatDate(item.date),\n        tagColor: item.status === 'Success' ? \"#41f067\" : \"#f04141\"\n      };\n    });\n    setData(formattedData);\n  }, [listData, monthSelected, yearSelected, data.length]);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(ContentHeader, {\n      title: title,\n      lineColor: lineColor,\n      children: [/*#__PURE__*/_jsxDEV(SelectInput, {\n        options: months,\n        onChange: e => setMonthSelected(e.target.value),\n        defaultValue: monthSelected\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(SelectInput, {\n        options: years,\n        onChange: e => setYearSelected(e.target.value),\n        defaultValue: yearSelected\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Filters, {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: `tag-filter\n                    tag-filter-success\n                    ${selectedStatus.includes('Success')}`,\n        onClick: () => handleStatusClick('Success'),\n        children: \"Success\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: `tag-filter\n                    tag-filter-failed`,\n        onClick: () => handleStatusClick('Fail'),\n        children: \"Failed\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Content, {\n      children: data.map(item => /*#__PURE__*/_jsxDEV(JobMonitoring, {\n        tagColor: item.tagColor,\n        date: item.date,\n        status: item.status\n      }, item.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 132,\n    columnNumber: 9\n  }, this);\n};\n_s(List, \"TQTJ6v4eQHJ2vHy7qCz/hnIFqnc=\", false, function () {\n  return [useParams];\n});\n_c = List;\nexport default List;\nvar _c;\n$RefreshReg$(_c, \"List\");","map":{"version":3,"names":["React","useMemo","useState","useEffect","v4","uuidv4","ContentHeader","useParams","SelectInput","JobMonitoring","radar_run","myna_run","formatDate","listOfMonths","Container","Content","Filters","jsxDEV","_jsxDEV","List","_s","data","setData","monthSelected","setMonthSelected","String","Date","getMonth","yearSelected","setYearSelected","getFullYear","selectedStatus","setSelectedStatus","job","title","lineColor","listData","years","uniqueYears","forEach","item","date","year","includes","push","map","value","label","months","month","index","handleStatusClick","runStatus","alreadySelected","findIndex","console","log","filtered","filter","prev","filteredDate","formattedData","id","status","tagColor","length","children","options","onChange","e","target","defaultValue","fileName","_jsxFileName","lineNumber","columnNumber","type","className","onClick","_c","$RefreshReg$"],"sources":["C:/Users/002335631/Documents/sar_documents/archive/archive_dashboard/dashboard_frontend/dashboard_frontend/src/pages/List/index.tsx"],"sourcesContent":["import React, { useMemo, useState, useEffect } from 'react';\r\nimport {v4 as uuidv4} from 'uuid';\r\n\r\nimport  ContentHeader  from '../../components/ContentHeader';\r\nimport { useParams } from 'react-router-dom';\r\nimport  SelectInput  from '../../components/SelectInput';\r\nimport JobMonitoring from '../../components/JobMonitoring';\r\n\r\nimport radar_run from '../../repositories/radar_run';\r\nimport myna_run from '../../repositories/myna_run';\r\n\r\nimport formatDate from '../../utils/formatDate';\r\nimport listOfMonths from '../../utils/months';\r\n\r\nimport { Container, Content, Filters } from './styles';\r\n\r\ninterface IRouteParams {\r\n    job: string;\r\n}\r\n\r\ninterface IData {\r\n    id: string;\r\n    status: string;\r\n    date: string;\r\n    tagColor: string;\r\n}\r\n\r\nconst List: React.FC = () => {\r\n\r\n    const [data, setData] = useState<IData[]>([]);\r\n\r\n    const [monthSelected, setMonthSelected] =  useState<string>(String(new Date().getMonth() + 1)) \r\n\r\n    const [yearSelected, setYearSelected] =  useState<string>(String(new Date().getFullYear())) \r\n\r\n    const [selectedStatus, setSelectedStatus] = useState([\"Success\",\"Fail\"]);\r\n\r\n\r\n    const { job } = useParams<keyof IRouteParams>() as IRouteParams;\r\n\r\n    const title = useMemo(() => {\r\n        return  job === 'entry-myna' ? 'Myna monitoring': 'Radar monitoring'\r\n    }, [job]);\r\n\r\n    const lineColor = useMemo(() => {\r\n        return  job === 'entry-myna' ? '#F7931B': '#E44C4E'\r\n    }, [job]);\r\n\r\n\r\n   const listData = useMemo(() => {\r\n    return  job === 'entry-myna' ? myna_run: radar_run;\r\n    }, [job]);\r\n\r\n    \r\n\r\n    const years = useMemo(() => {\r\n        let uniqueYears: number[] = [];\r\n\r\n        listData.forEach(item => {\r\n            const date = new Date(item.date);\r\n            const year = date.getFullYear();\r\n\r\n            if (!uniqueYears.includes(year)) {\r\n                uniqueYears.push(year);\r\n            }\r\n        });\r\n\r\n        return uniqueYears.map( year => {\r\n            return{\r\n                value: year,\r\n                label: year,\r\n            }\r\n        });\r\n\r\n    }, [listData]);\r\n\r\n\r\n    const months = useMemo(() => {\r\n            return listOfMonths.map((month, index) => {\r\n\r\n                return {\r\n                    value: index + 1 ,\r\n                    label:  month,\r\n                }\r\n            \r\n            });\r\n\r\n    }, []);\r\n\r\n\r\n    const handleStatusClick = (runStatus: string) => {\r\n\r\n        const alreadySelected = selectedStatus.findIndex(item => item === runStatus);\r\n\r\n        if ( alreadySelected >=0 ) {\r\n            console.log('ja selecionado');\r\n            const filtered = selectedStatus.filter(item => item !== runStatus);\r\n            setSelectedStatus(filtered);\r\n            \r\n        } else {\r\n            console.log('selecionado agora');\r\n            setSelectedStatus((prev) => [...prev, runStatus ]);\r\n        }\r\n\r\n\r\n    }\r\n\r\n    useEffect(() => {\r\n        const  filteredDate = listData.filter(item => {\r\n\r\n            const date = new Date(item.date)\r\n            const month = String(date.getMonth() + 1);\r\n            const year = String(date.getFullYear());\r\n            return month === monthSelected && year === yearSelected;\r\n        });\r\n\r\n        const formattedData = filteredDate.map(item => { \r\n\r\n            return{\r\n               // id: String(new Date().getTime()) + (Math.random()),\r\n                id: uuidv4(),\r\n                status: item.status,\r\n                date: formatDate(item.date),\r\n                tagColor: item.status === 'Success' ? \"#41f067\" : \"#f04141\"\r\n            }\r\n           \r\n        })\r\n        setData(formattedData);\r\n    },[listData, monthSelected, yearSelected, data.length]);\r\n\r\n    return (\r\n        <Container>\r\n        <ContentHeader title ={title} lineColor={lineColor}>\r\n            <SelectInput options= {months} onChange= { (e) => setMonthSelected(e.target.value)} defaultValue={monthSelected}/>\r\n            <SelectInput options= {years} onChange= { (e) => setYearSelected(e.target.value)} defaultValue={yearSelected}/>\r\n        </ContentHeader>\r\n\r\n        <Filters>\r\n                <button \r\n                    type=\"button\"\r\n                    className=\r\n                    {`tag-filter\r\n                    tag-filter-success\r\n                    ${selectedStatus.includes('Success')}`}\r\n                    onClick={() => handleStatusClick('Success')}\r\n                >\r\n                    Success\r\n                </button>\r\n\r\n                <button \r\n                    type=\"button\"\r\n                    className= \r\n                    {`tag-filter\r\n                    tag-filter-failed`}\r\n                    onClick={() => handleStatusClick('Fail')}\r\n                >\r\n                    Failed\r\n                </button>\r\n        </Filters>\r\n        <Content>\r\n            {\r\n                data.map(item =>(\r\n                    <JobMonitoring \r\n                    key = {item.id}\r\n                    tagColor = {item.tagColor}\r\n                    date = {item.date}\r\n                    status = {item.status}\r\n                    />\r\n\r\n                ))\r\n            \r\n           \r\n            }\r\n        </Content>\r\n\r\n    </Container>\r\n    );\r\n    }\r\nexport default List;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}